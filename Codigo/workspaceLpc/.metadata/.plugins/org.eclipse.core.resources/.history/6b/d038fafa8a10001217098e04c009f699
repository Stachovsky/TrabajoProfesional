/*
 * Core.c
 *
 *  Created on: Sep 26, 2012
 *      Author: "Facundo Nahuel Uriel Silva"
 */

#include "taskCore.h"

void taskCore(void *paramametro){

	const portTickType xDelay = 1000 / portTICK_RATE_MS;

	msgPcCom msgTX;
	uint8_t bufferSend[MAX_CMDPCCOM_SIZE_DATA + MIN_CMDPCCOM_SIZE_PACKED];

	pcComInitMsg(&msgTX,CMD_PCCOM_READ_ADC_1);

	pcComPackMsg(&msgTX,bufferSend, MAX_CMDPCCOM_SIZE_DATA + MIN_CMDPCCOM_SIZE_PACKED);

	while(1){

		xQueueSend(queuePcComTX,&msgTX,1000);
		vTaskDelay( xDelay );
		msgTX.idMsg++;
		taskYIELD();
	}
}
