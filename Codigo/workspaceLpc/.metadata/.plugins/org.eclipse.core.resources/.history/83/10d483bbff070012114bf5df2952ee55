/*
 * PcCommunication.c
 *
 *  Created on: Sep 26, 2012
 *      Author: Facundo Nahuel Uriel Silva
 */

#include "taskPcCommunication.h"

///////////////////////////////////////////////////////////////////////////////////////////////
// Variables globales
///////////////////////////////////////////////////////////////////////////////////////////////

xQueueHandle queuePcComRX;
xQueueHandle queuePcComTX;




///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

void taskPcCommunication(void *param){

	uint8_t nada[15];
	int8_t i = 0;

	// Se inicializa la uart 3
	API_UartConfig(UART_PORT_3, interruptUart3);

	API_UartEnableInterrupt(UART_PORT_3);
	const portTickType xDelay = 1000 / portTICK_RATE_MS;

	while (1) {
		sprintf((char*)nada, "tick %d\r\n", (unsigned int)i++);
		API_UartSendString(UART_PORT_3,nada);
		vTaskDelay( xDelay );
	}
}

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

void interruptUart3(uint8_t c){

	uint8_t temp[15];
	API_UartDisableInterrupt(UART_PORT_3);

	sprintf((char*)temp, "llego %c\r\n", (char)c);
	API_UartSendString(UART_PORT_3,temp);

	API_UartEnableInterrupt(UART_PORT_3);
}

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
